<div class="map-container">
  <div class="map-content">
    <app-route-viewer></app-route-viewer>

    <div class="lines-panel">
      <app-search-filter-panel
        [(searchTerm)]="searchTerm"
        [(selectedCity)]="selectedCity"
        [(selectedType)]="selectedType"
        [(collectionStatus)]="collectionStatus"
        [(viewMode)]="viewMode"
        [cityOptions]="cityOptions"
        [typeOptions]="typeOptions"
        [collectionOptions]="collectionOptions">
      </app-search-filter-panel>

      <div
        class="lines-list"
        [ngClass]="{ 'list-mode': viewMode === 'list', 'grid-mode': viewMode === 'grid' }">
        @for(line of (transitLines$ | async); track line.id) {
          <app-transit-line-card
            [line]="line"
            [viewMode]="viewMode"
            (toggleCompletion)="onLineToggle($event)">
          </app-transit-line-card>
        }
      </div>
    </div>
  </div>
</div>
