<div class="filter-dialog">
  <header class="filter-header">
    <button class="back-button" type="button" (click)="cancel()">
      <i class="pi pi-arrow-left"></i>
    </button>
    <span class="filter-title">Filter</span>
  </header>

  <div class="filter-body">
    <section class="filter-section">
      <h3>Transport Type</h3>
      <div class="chip-row">
        @for (type of transitTypes; track type.value) {
          <button
            type="button"
            class="chip"
            [class.active]="isTypeSelected(type.value)"
            (click)="onTypeChange(type.value, !isTypeSelected(type.value))">
            {{ type.label }}
          </button>
        }
      </div>
    </section>

    <div class="section-divider"></div>

    <section class="filter-section">
      <h3>Region</h3>
      <div class="option-list">
        @for (region of regions; track region) {
          <label class="option-row">
            <span>{{ region }}</span>
            <p-checkbox
              [ngModel]="isRegionSelected(region)"
              (onChange)="onRegionChange(region, $event.checked)">
            </p-checkbox>
          </label>
        }
      </div>
    </section>

    <div class="section-divider"></div>

    <section class="filter-section">
      <h3>Completion Status</h3>
      <div class="option-list">
        @for (option of completionOptions; track option.value) {
          <button
            type="button"
            class="option-button"
            [class.active]="filters.completionStatus === option.value"
            (click)="filters.completionStatus = option.value">
            <span>{{ option.label }}</span>
            <i class="pi" [ngClass]="filters.completionStatus === option.value ? 'pi-check-circle' : 'pi-circle'"></i>
          </button>
        }
      </div>
    </section>
  </div>

  <footer class="filter-actions">
    <button class="ghost" type="button" (click)="clearFilters()">Clear</button>
    <button class="primary" type="button" (click)="applyFilters()">Show Results</button>
  </footer>
</div>
